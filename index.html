<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NULLIX SCRIPT HUB - Galaxy V2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #030305; --card: rgba(15,15,25,0.65); --card-border: rgba(88,101,242,0.3); --text: #f0f0ff;
            --primary: #5865f2; --accent: #00d4ff; --glow: 0 0 30px rgba(0,212,255,0.5);
            --shadow: 0 15px 35px rgba(0,0,0,0.8);
        }
        [data-theme="light"] {
            --bg: #f8f9fa; --card: rgba(255,255,255,0.8); --card-border: rgba(88,101,242,0.2); --text: #1e293b;
            --primary: #4f46e5; --accent: #0ea5e9; --glow: 0 0 25px rgba(14,165,233,0.4);
        }
        
        * { margin:0; padding:0; box-sizing:border-box; outline: none; }
        body { background:var(--bg); color:var(--text); font-family:'Inter',sans-serif; overflow-x:hidden; transition: 0.5s; }
        
        .nebula {
            position: fixed; top: -20%; left: 50%; transform: translateX(-50%); width: 70vw; height: 70vw; border-radius: 50%;
            background: radial-gradient(circle, rgba(88,101,242,0.15) 0%, rgba(0,212,255,0.05) 40%, transparent 70%);
            z-index: -1; filter: blur(60px); animation: pulseNebula 8s infinite alternate ease-in-out; pointer-events: none;
        }
        @keyframes pulseNebula { 0% { opacity: 0.6; transform: translateX(-50%) scale(0.9); } 100% { opacity: 1; transform: translateX(-50%) scale(1.1); } }
        canvas#galaxy { position:fixed; top:0; left:0; width:100%; height:100%; z-index:-2; pointer-events:none; }

        .header { text-align:center; padding:100px 20px 30px; position:relative; }
        .header h1 { 
            font-family: 'Orbitron', sans-serif; font-size: clamp(3rem, 10vw, 5rem); font-weight: 900;
            background: linear-gradient(90deg, #00f2fe, #4facfe, #00f2fe); -webkit-background-clip: text; color: transparent; background-size: 200% auto;
            animation: textShine 4s linear infinite; letter-spacing: 4px; filter: drop-shadow(0 0 15px rgba(0,212,255,0.3)); margin: 0;
        }
        @keyframes textShine { to { background-position: 200% center; } }
        .header p { color: #a0aec0; margin-top: 10px; font-size: 1.1rem; }

        .controls { display:flex; justify-content:center; gap:20px; padding:20px; flex-wrap:wrap; }
        .search-input { 
            padding:16px 25px; width:360px; border-radius:50px; border:1px solid var(--card-border); 
            background:rgba(255,255,255,0.05); color:var(--text); font-size: 1rem; backdrop-filter: blur(10px); transition: 0.3s; 
        }
        .search-input:focus { box-shadow: var(--glow); background:rgba(0,0,0,0.5); border-color: var(--accent); }
        .theme-toggle { padding:12px 20px; background:rgba(255,255,255,0.1); border-radius:50px; cursor:pointer; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px); transition: 0.3s; }
        .theme-toggle:hover { border-color: var(--accent); color: var(--accent); }

        .tabs { display:flex; gap:12px; justify-content:center; padding:10px 20px; flex-wrap:wrap; }
        .tab-btn { padding:12px 24px; border:1px solid transparent; background:rgba(255,255,255,0.05); color:var(--text); border-radius:50px; cursor:pointer; font-weight: 600; font-family: 'Orbitron'; transition: 0.3s; backdrop-filter: blur(5px); }
        .tab-btn:hover { background:rgba(255,255,255,0.15); }
        .tab-btn.active { background:rgba(88,101,242,0.2); color:var(--accent); border-color: var(--accent); box-shadow: inset 0 0 15px rgba(0,212,255,0.2); }

        .sub-tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; padding: 0 20px; }
        .sub-btn { padding: 6px 18px; border: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.4); color: #a0aec0; border-radius: 8px; cursor: pointer; font-size: 0.9rem; transition: 0.3s; }
        .sub-btn:hover { background: rgba(255,255,255,0.1); color: white; }
        .sub-btn.active { background: var(--accent); color: #000; font-weight: bold; border-color: transparent; box-shadow: 0 0 15px rgba(0,212,255,0.5); }

        .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(320px,1fr)); gap:25px; padding:20px 20px 60px; max-width:1400px; margin:auto; }
        
        .script-card {
            background:var(--card); border-radius:20px; padding:25px; transition:0.4s ease;
            border:1px solid var(--card-border); box-shadow:var(--shadow); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            display: flex; flex-direction: column; height: 100%; box-sizing: border-box;
        }
        .script-card:hover { transform:translateY(-10px); border-color:rgba(0,212,255,0.6); box-shadow: 0 20px 40px rgba(0,0,0,0.6), 0 0 25px rgba(0,212,255,0.2), inset 0 0 15px rgba(88,101,242,0.1); }
        
        .script-card h3 { color:white; margin:10px 0; font-size: 1.4rem; font-family: 'Orbitron'; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-meta { display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; color: var(--accent); margin-bottom: 15px; font-weight: 600; }
        .tag { padding: 4px 10px; border-radius: 6px; font-weight: bold; font-size: 0.75rem; color: white; box-shadow: 0 3px 10px rgba(0,0,0,0.3); }
        .tag.hot { background: linear-gradient(135deg, #ff416c, #ff4b2b); }
        .tag.new { background: linear-gradient(135deg, #00b09b, #96c93d); }
        .tag.vip { background: linear-gradient(135deg, #f5af19, #f12711); }
        
        .get-btn { width:100%; padding:14px; background:rgba(255,255,255,0.05); color:var(--accent); border:1px solid var(--accent); border-radius:12px; font-weight:700; font-family: 'Orbitron'; cursor:pointer; margin-top:auto; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; text-transform: uppercase; }
        .get-btn:hover { background: var(--accent); color: #000; box-shadow: var(--glow); transform: translateY(-3px); }

        .toast { position:fixed; bottom:30px; right:30px; background:linear-gradient(135deg, #00b09b, #96c93d); color:white; padding:16px 24px; border-radius:12px; font-weight: 600; box-shadow:0 10px 30px rgba(0,176,155,0.4); display:none; z-index:9999; animation: slideIn 0.3s cubic-bezier(0.175,0.885,0.32,1.275); }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }

        .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:10000; align-items:center; justify-content:center; backdrop-filter: blur(8px); }
        .modal-content { background:var(--card); width:90%; max-width:700px; border-radius:20px; padding:30px; border: 1px solid var(--accent); box-shadow: var(--glow); position: relative; }
        .close { position: absolute; top: 20px; right: 25px; font-size:2rem; cursor:pointer; color: #a0aec0; transition: 0.3s; }
        .close:hover { color: var(--accent); }
        pre#modal-code { background:rgba(0,0,0,0.5); color: #00ff9d; padding:20px; border-radius:12px; max-height:300px; overflow:auto; font-family: monospace; border: 1px solid rgba(255,255,255,0.1); line-height: 1.5; }
        
        .copy-btn { background:linear-gradient(90deg, #00f2fe, #4facfe); color:#000; padding:16px; border:none; border-radius:12px; font-weight:900; font-family: 'Orbitron'; cursor:pointer; margin-top: 20px; width: 100%; transition: 0.3s; font-size: 1.1rem; text-transform: uppercase; }
        .copy-btn:hover { box-shadow: var(--glow); transform: translateY(-3px); }

        .support { margin:40px auto 80px; max-width:700px; text-align:center; padding:50px 30px; background:var(--card); backdrop-filter: blur(15px); border-radius:20px; border:1px solid var(--card-border); box-shadow: var(--shadow); }
        .support h2 { font-family: 'Orbitron'; color: var(--accent); margin-bottom: 10px; }

        @media(max-width: 768px) { .header h1 { font-size: 2.5rem; } .grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body data-theme="dark">

    <div class="nebula"></div>
    <canvas id="galaxy"></canvas>
    <div class="toast" id="toast"><i class="fas fa-check-circle"></i> Đã chép mã Script!</div>

    <div class="header">
        <h1>NULLIX SCRIPT HUB</h1>
        <p>Galaxy Theme • Script Theo Game • Cập nhật liên tục</p>
    </div>

    <div class="controls">
        <input type="text" id="searchInput" class="search-input" placeholder="Tìm tên game hoặc script...">
        <div class="theme-toggle" onclick="toggleTheme()">
            <i class="fas fa-moon" id="theme-icon"></i>
        </div>
    </div>

    <div class="tabs" id="tabs"></div>
    <div class="sub-tabs" id="subTabs"></div>

    <div class="grid" id="grid">
        <p style="text-align:center; grid-column:1/-1; color:#888;">Đang kết nối đến server script...</p>
    </div>

    <div class="support">
        <h2><i class="fas fa-headset"></i> Cần hỗ trợ script?</h2>
        <p style="color:#a0aec0; margin-bottom: 25px;">Script bị lỗi hoặc cần tìm script mới? Tham gia ngay Discord của Nullix!</p>
        <a href="https://discord.gg/59XF8hMW5R" target="_blank" style="background:#5865f2;color:white;padding:16px 40px;border-radius:50px;text-decoration:none;font-weight:700; font-family:'Orbitron'; display:inline-flex;align-items:center;gap:12px; transition: 0.3s; box-shadow: 0 5px 15px rgba(88,101,242,0.4);">
            <i class="fab fa-discord"></i> Tham gia Cộng Đồng
        </a>
    </div>

    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">×</span>
            <h2 id="modal-title" style="margin-top:0; color:var(--accent); font-family: 'Orbitron'; margin-bottom: 15px;">Script Title</h2>
            <div style="position:relative;">
                <pre id="modal-code"></pre>
            </div>
            <button class="copy-btn" onclick="copyCode()">
                <i class="fas fa-copy"></i> Lấy Mã Này
            </button>
        </div>
    </div>

    <script>
        // KHO BNMHUY CŨ 
        const DATA_URL = 'https://raw.githubusercontent.com/HypatiaDz/bnmhuy/main/data.json';
        
        let scriptsData = [];

        const grid = document.getElementById('grid');
        const tabsContainer = document.getElementById('tabs');
        const subTabsContainer = document.getElementById('subTabs');
        const searchInput = document.getElementById('searchInput');
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalCode = document.getElementById('modal-code');
        const toast = document.getElementById('toast');
        
        let currentFilter = 'All'; 
        let currentCategory = 'All'; 

        const CATEGORIES = [
            { name: 'Tất cả', keyword: 'All' },
            { name: 'Kaitun / Auto', keyword: 'kaitun' },
            { name: 'PVP / Bounty', keyword: 'pvp' },
            { name: 'Up Tộc V4', keyword: 'v4' },
            { name: 'Sea Event', keyword: 'sea' },
            { name: 'Chest / Items', keyword: 'chest' },
            { name: 'Hub Tổng', keyword: 'hub' }
        ];

        async function init() {
            try {
                const response = await fetch(DATA_URL + '?t=' + Date.now());
                if (!response.ok) throw new Error("Lỗi kết nối GitHub");
                
                scriptsData = await response.json();
                
                renderTabs();
                renderSubTabs();
                renderScripts(scriptsData);
            } catch (error) {
                console.error(error);
                grid.innerHTML = `<div style="grid-column:1/-1; text-align:center; padding:50px; color:#ff4757;">
                    <i class="fas fa-exclamation-triangle" style="font-size:3rem; margin-bottom:15px;"></i><br>
                    Chưa có dữ liệu hoặc lỗi kết nối!
                </div>`;
            }
            initGalaxy(); animateStars();
        }

        function renderTabs() {
            const games = ['All', ...new Set(scriptsData.map(item => item.game))];
            tabsContainer.innerHTML = games.map(game => `
                <button class="tab-btn ${game === 'All' ? 'active' : ''}" onclick="filterByGame('${game}')">
                    ${game === 'All' ? '<i class="fas fa-globe"></i> Kho Script' : game}
                </button>
            `).join('');
        }

        function renderSubTabs() {
            subTabsContainer.innerHTML = CATEGORIES.map(cat => `
                <button class="sub-btn ${cat.keyword === 'All' ? 'active' : ''}" onclick="filterByCategory('${cat.keyword}', this)">
                    ${cat.name}
                </button>
            `).join('');
        }

        function renderScripts(data) {
            grid.innerHTML = "";
            if(data.length === 0) {
                grid.innerHTML = `<div style="grid-column:1/-1; text-align:center; padding:50px; color:#666;">
                    <i class="fas fa-search" style="font-size:3rem; margin-bottom:15px;"></i><br>
                    Không tìm thấy script phù hợp.
                </div>`;
                return;
            }

            data.forEach(item => {
                const card = document.createElement('div');
                card.className = 'script-card';
                const tagHTML = item.tag ? `<span class="tag ${item.tagClass || 'hot'}">${item.tag}</span>` : '';
                
                card.innerHTML = `
                    <div class="card-meta">
                        <span><i class="fas fa-folder-open"></i> ${item.game}</span>
                        ${tagHTML}
                    </div>
                    <h3 title="${item.title}">${item.title}</h3>
                    <p style="color:#a0aec0; font-size:0.95rem; margin-bottom:20px; flex-grow:1; line-height:1.6;">${item.desc}</p>
                    <div style="border-top:1px solid rgba(255,255,255,0.05); margin-bottom:15px;"></div>
                    <button class="get-btn" onclick="openModal(${item.id})">
                        <i class="fas fa-code"></i> LẤY MÃ
                    </button>
                `;
                grid.appendChild(card);
            });
        }

        window.filterByGame = function(game) {
            currentFilter = game;
            currentCategory = 'All'; 
            renderSubTabs(); 

            document.querySelectorAll('.tab-btn').forEach(btn => {
                if(btn.textContent.includes(game) || (game === 'All' && btn.textContent.includes('Kho Script'))) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            filterData();
        }

        window.filterByCategory = function(category, btnElement) {
            currentCategory = category;
            document.querySelectorAll('.sub-btn').forEach(btn => btn.classList.remove('active'));
            btnElement.classList.add('active');
            filterData();
        }

        searchInput.addEventListener('input', () => filterData());

        function filterData() {
            const keyword = searchInput.value.toLowerCase();
            const filtered = scriptsData.filter(item => {
                const matchGame = currentFilter === 'All' || item.game === currentFilter;
                const matchSearch = item.title.toLowerCase().includes(keyword) || 
                                    item.game.toLowerCase().includes(keyword) ||
                                    item.desc.toLowerCase().includes(keyword);

                let matchCategory = true;
                if (currentCategory !== 'All') {
                    const content = (item.title + " " + item.desc).toLowerCase();
                    matchCategory = content.includes(currentCategory);
                }
                return matchGame && matchSearch && matchCategory;
            });
            renderScripts(filtered);
        }

        window.openModal = function(id) {
            const script = scriptsData.find(s => s.id === id);
            if(script) {
                modalTitle.innerText = script.title;
                modalCode.innerText = script.code;
                modal.style.display = 'flex';
            }
        }

        window.closeModal = function() { modal.style.display = 'none'; }

        window.copyCode = function() {
            const code = modalCode.innerText;
            navigator.clipboard.writeText(code).then(() => {
                toast.style.display = 'flex';
                closeModal();
                setTimeout(() => toast.style.display = 'none', 3000);
            }).catch(() => alert('Không thể copy!'));
        }

        window.onclick = function(e) { if(e.target == modal) closeModal(); }

        const canvas = document.getElementById('galaxy');
        const ctx = canvas.getContext('2d');
        let stars = [];
        let starColor = '#00d4ff';

        function updateStarColor() { starColor = document.body.getAttribute('data-theme') === 'light' ? "#777" : "rgba(0, 212, 255, 0.8)"; }

        function initGalaxy() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight; stars = [];
            for (let i = 0; i < 150; i++) {
                stars.push({
                    x: Math.random() * canvas.width, y: Math.random() * canvas.height,
                    size: Math.random() * 2, speed: Math.random() * 0.5 + 0.1
                });
            }
        }

        function animateStars() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = starColor;
            stars.forEach(s => {
                ctx.beginPath(); ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2); ctx.fill();
                s.y -= s.speed; if(s.y < 0) s.y = canvas.height;
            });
            requestAnimationFrame(animateStars);
        }

        window.addEventListener('resize', initGalaxy);

        window.toggleTheme = function() {
            const isDark = document.body.getAttribute('data-theme') === 'dark';
            document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
            document.getElementById('theme-icon').className = isDark ? 'fas fa-sun' : 'fas fa-moon';
            updateStarColor();
        }

        init();
    </script>
</body>
</html>
